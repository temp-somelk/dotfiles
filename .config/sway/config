# Variables
set $mod Mod4
set $left h
set $down j
set $up k
set $right l
set $term termite
set $menu wofi

# Idle
exec swayidle -w \
         timeout 60 'brightnessctl -s && brightnessctl set 0' resume 'brightnessctl -r' \
         timeout 240 'swaylock' \
         timeout 300 'swaymsg "output * dpms off"' resume 'swaymsg "output * dpms on"' \
         timeout 360 'systemctl suspend -i' \
         before-sleep 'swaylock'

# Touchpad
input "type:touchpad" {
      dwt enabled
      drag enabled
      tap enabled
      tap_button_map lrm
      middle_emulation enabled
      natural_scroll disabled
      scroll_method two_finger
      scroll_factor 0.5
      accel_profile adaptive
      pointer_accel 0.2
}

# Keyboard
input "type:keyboard" {
      xkb_layout us
      xkb_options compose:caps
      xkb_capslock disabled
      xkb_numlock disabled
      repeat_delay 500
      repeat_rate 30
}

# Basic key bindings
bindsym $mod+Return exec $term
bindsym $mod+d exec $menu
bindsym $mod+Shift+c reload
bindsym Ctrl+Mod1+Delete exit
bindsym $mod+Shift+q kill
bindsym --whole-window $mod+button2 kill
bindsym button2 kill
floating_modifier $mod normal

# Scratchpad
# Sway has a "scratchpad", which is a bag of holding for windows.
# You can send windows there and get them back later.
bindsym $mod+Shift+grave move scratchpad
bindsym $mod+grave scratchpad show

# Focus
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Move
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Focus to workspace
bindsym $mod+Tab workspace next
bindsym $mod+Shift+Tab workspace prev
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10
# With Numpad
bindsym $mod+KP_1 workspace number 1
bindsym $mod+KP_2 workspace number 2
bindsym $mod+KP_3 workspace number 3
bindsym $mod+KP_4 workspace number 4
bindsym $mod+KP_5 workspace number 5
bindsym $mod+KP_6 workspace number 6
bindsym $mod+KP_7 workspace number 7
bindsym $mod+KP_8 workspace number 8
bindsym $mod+KP_9 workspace number 9
bindsym $mod+KP_0 workspace number 10

# Move to workspace
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10
# With NumPad
bindsym $mod+Shift+KP_1 move container to workspace number 1
bindsym $mod+Shift+KP_2 move container to workspace number 2
bindsym $mod+Shift+KP_3 move container to workspace number 3
bindsym $mod+Shift+KP_4 move container to workspace number 4
bindsym $mod+Shift+KP_5 move container to workspace number 5
bindsym $mod+Shift+KP_6 move container to workspace number 6
bindsym $mod+Shift+KP_7 move container to workspace number 7
bindsym $mod+Shift+KP_8 move container to workspace number 8
bindsym $mod+Shift+KP_9 move container to workspace number 9
bindsym $mod+Shift+KP_0 move container to workspace number 10

# Layout
bindsym $mod+b splith
bindsym $mod+v splitv
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split
bindsym $mod+Shift+space floating toggle
bindsym button3 floating toggle
bindsym $mod+space focus mode_toggle
bindsym $mod+a focus parent
bindsym $mod+f fullscreen

# Resize
mode "Resize" {
    bindsym $left resize shrink width 10px
    bindsym $down resize grow height 10px
    bindsym $up resize shrink height 10px
    bindsym $right resize grow width 10px
    bindsym equal resize grow width 10px
    bindsym minus resize shrink width 10px
    bindsym bracketright resize grow height 10px
    bindsym bracketleft resize shrink height 10px
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "Resize"

# Power Options
set $mode_system (l)ock (s)uspend (e)Logout (R)eboot, (S)hutdown
mode "$mode_system" {
    bindsym l exec swaylock, mode "default"
    bindsym e exec swaymsg exit, mode "default"
    bindsym s exec systemctl suspend -i, mode "default"
    bindsym Shift+r exec systemctl reboot -i, mode "default"
    bindsym Shift+s exec systemctl poweroff -i, mode "default"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+x mode "$mode_system"

# Tools
set $mode_tools (m)atrix (c)olor
mode "$mode_tools" {
    bindsym m exec grim -g "$(slurp)" - | zbarimg --quiet --raw - | wl-copy, mode "default"
    bindsym c exec grim -g "$(slurp -p)" -t ppm - | convert - -format '%[pixel:p{0,0}]' txt:- | tail -n 1 | cut -d ' ' -f 4 | wl-copy, mode "default"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+t mode "$mode_tools"

# Volume, Media and Brightness
bindsym --locked XF86AudioRaiseVolume exec amixer sset Master 5%+
bindsym --locked XF86AudioLowerVolume exec amixer sset Master 5%-
bindsym --locked Shift+XF86AudioRaiseVolume exec amixer sset Master 2%+
bindsym --locked Shift+XF86AudioLowerVolume exec amixer sset Master 2%-
bindsym --locked XF86AudioMute exec amixer set Master toggle
bindsym --locked XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SOURCE@ toggle
bindsym --locked XF86MonBrightnessDown exec brightnessctl set 5%-
bindsym --locked XF86MonBrightnessUp exec brightnessctl set +5%
bindsym --locked Shift+XF86MonBrightnessDown exec brightnessctl set 2%-
bindsym --locked Shift+XF86MonBrightnessUp exec brightnessctl set +2%
bindsym --locked XF86AudioPlay exec playerctl play-pause
bindsym --locked XF86AudioNext exec playerctl next
bindsym --locked XF86AudioPrev exec playerctl previous
bindsym --locked $mod+m exec pactl set-source-mute @DEFAULT_SOURCE@ toggle

# Screenshots
bindsym Print exec grim $HOME/Pictures/Screenshots/$(date +'%F_%T.png')
bindsym Shift+Print exec grim -g "$(slurp)" $HOME/Pictures/Screenshots/$(date +'%F_%T.png')
bindsym Ctrl+Print exec grim - | wl-copy
bindsym Ctrl+Shift+Print exec grim -g "$(slurp)" - | wl-copy
bindsym $mod+Print exec swaymsg -t get_tree | jq -r '.. | select(.focused?) | .rect | "\(.x),\(.y) \(.width)x\(.height)"' | grim -g - $HOME/Pictures/Screenshots/$(date +'%F_%T.png')
bindsym $mod+Ctrl+Print exec swaymsg -t get_tree | jq -r '.. | select(.focused?) | .rect | "\(.x),\(.y) \(.width)x\(.height)"' | grim -g - - | wl-copy

# Screencasts
bindsym $mod+F10 exec wf-recorder --audio="$(pactl list sources | grep "Name" | grep "output" | cut -c 8-)" -f $HOME/Videos/Screencasts/$(date +'%F_%T.mp4')
bindsym $mod+Shift+F10 exec wf-recorder -g "$(slurp)" --audio="$(pactl list sources | grep "Name" | grep "output" | cut -c 8-)" -f $HOME/Videos/Screencasts/$(date +'%F_%T.mp4')
bindsym $mod+Escape exec killall -s SIGINT wf-recorder

# Clipboard Manager
exec clipman clear -a
exec wl-paste -t text --watch clipman store --max-items=20
exec wl-paste -p -t text --watch clipman store -P --histpath="~/.local/share/clipman-primary.json"
bindsym $mod+z exec clipman pick -t wofi
bindsym $mod+Shift+z exec clipman clear -t wofi
bindsym $mod+Shift+Ctrl+z exec clipman clear -a

# Windows Switcher
bindsym $mod+c exec $HOME/.config/scripts/winswitch.sh

font pango:SourceSansPro 10

# Gaps
bindsym $mod+equal gaps outer current plus 15
bindsym $mod+minus gaps outer current minus 15
bindsym $mod+Shift+equal gaps inner current plus 15
bindsym $mod+Shift+minus gaps inner current minus 15
gaps inner 15
gaps outer 15
workspace 3 gaps outer 0
workspace 3 gaps inner 0
workspace 5 gaps outer 0
workspace 5 gaps inner 0
workspace 6 gaps outer 0
workspace 6 gaps inner 0

# Rules
assign [app_id="firefox"] workspace 3
assign [class="vlc"] workspace 6
for_window [class="zoom"] inhibit_idle visible
for_window [class="vlc"] inhibit_idle visible
for_window [workspace=3] layout tabbed
for_window [workspace=5] layout tabbed
for_window [workspace=6] layout tabbed
for_window [workspace=10] floating enabled

# Theme
include config.ocean.conf
include /etc/sway/config.d/*

# Notifications
exec mako

# Redshit
exec gammastep

# Status Bar
exec waybar
